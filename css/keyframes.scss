@import 'variables';
@import 'mixins';

@keyframes button-flash {
    0%, 100% {
        @include bin-button(1);
    }

    50% {
        @include bin-button(2);
    }
}

@keyframes timer-flash {
    0%, 100% {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

$transform: scale(2) translateX(-50%) translateY(95px);
@keyframes pour {
    0% {
        transform: $transform rotate(0deg);
    }

    50% {
        transform: $transform rotate(-45deg);
    }

    100% {
        transform: $transform rotate(0deg);
    }
}

$fantastic-transform: translateX(400px) translateY(-50%);
$move: translateX(400px) translateY(-50%);
@keyframes fantastic-pour {
    0% {
        transform: $fantastic-transform rotate(0deg);
    }

    25% {
        transform: $move rotate(0deg);
    }

    50% {
        transform: $move rotate(45deg);
    }

    75% {
        transform: $move rotate(0deg);
    }

    100% {
        transform: $fantastic-transform rotate(0deg);
    }
}

$master-transform: translateX(-50%) translateY(-50%);
@keyframes master-pour {
    0% {
        transform: $master-transform rotate(0deg);
    }

    50% {
        transform: $master-transform rotate(-45deg);
    }

    100% {
        transform: $master-transform rotate(0deg);
    }
}

$length: 12;
$timing-interval: 1.5;
$x-interval: 48;
$x-max: 560;
$y-start: 80;
$y-interval: 36;
$y-range: 250;
$deg-start: -30;
$deg-interval: 8;
$deg-range: 60;
@for $i from 1 through $length {
    $timing: ($length + 1 - $i) * $timing-interval;
    $x: (($i * $x-interval) % $x-max);
    $y: $y-start + (($i * $y-interval) % $y-range);
    $deg: $deg-start + (($i * $deg-interval) % $deg-range);

    @keyframes tray-#{$i} {
        0% {
            transform: translateX(50%) translateY(-200px) rotate(0deg) scale(.65);
        }

        #{percentage((25 - $timing) / 100)} {
            transform: translateX(#{$x}px) translateY(#{$y}px) rotate(#{$deg}deg) scale(.65);
        }

        #{percentage((60 + $timing) / 100)} {
            transform: translateX(#{$x}px) translateY(#{$y}px) rotate(#{$deg}deg) scale(.65);
        }

        #{percentage((70 + $timing) / 100)} {
            transform: translateX(#{$x}px) translateY(600px) rotate(0deg) scale(.65);
        }

        100% {
            transform: translateX(#{$x}px) translateY(600px) rotate(0deg) scale(.65);
        }
    }
}
